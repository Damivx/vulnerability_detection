from mitmproxy import http

class AddHeader:
    def request(self, flow: http.HTTPFlow) -> None:
        if flow.request.pretty_host == "example.org":
            flow.request.host = "mitmproxy.org"

addons = [
    AddHeader()
]

# Run mitmdump with the script containing the addon
from mitmproxy.tools.main import mitmdump

# Run mitmdump with the addon code directly
mitmdump(args=["-s", "interceptor.py"])
